+++
date = '2025-09-16T23:42:18+08:00'
draft = false
title = '0916学习日志'

categories="log"

tags=["计算机网络","网络层","IPv4","ICMP","DHCP","ARP"]

+++

## 计算机网络-网络层

### 网络层的功能

1. 异构网络直连
2. 路由与转发
   1. 路由选择
   2. 分组转发
3. 网络层提供的两种服务
   1. 虚电路
   2. 数据报
4. SDN（软件定义网络）
5. 拥塞控制

### IPv4

1. IPv4分组

   1. 格式
      1. （0-3，4b）版本
      2. （4-7，4b）首部长度：4B为单位
      3. （8-15，8b）区分服务
      4. （16-31，16b）总长度
      5. （32-47，16b）标识
      6. （48-51，4b）标志
      7. （52-63，12b）片位移：8B为单位
      8. （64-71，8b）生存时间TTL
      9. （72-79，8b）协议
      10. （80-95，16b）首部校验和
      11. （96-127，4B）源IP地址
      12. （128-159，4B）目的IP地址
   2. IP数据报分片
2. IPv4地址与NAT

   1. IPv4地址

      1. A类
         | 网络号                     | 主机号                                                            |
         | -------------------------- | ----------------------------------------------------------------- |
         | 8bit(0xxx xxxx, 01H - FEH) | 24bit(00 00 01H-FF FF FEH,00 00 00H为网络地址,FF FF FF为广播地址) |
      2. B类
         | 网络号                                 | 主机号               |
         | -------------------------------------- | -------------------- |
         | 16bit(10xx xxxx xxxx xxxx,8000H-BFFFH) | 16bit(00 01H-FF FEH) |
      3. C类
         | 网络号                                                   | 主机号        |
         | -------------------------------------------------------- | ------------- |
         | 24bit(110x xxxx xxxx xxxx xxxx xxxx,C0 00 00H-DF FF FFH) | 8bit(01H-FEH) |
      4. D类
         | 1110 | 多播地址 |
         | ---- | -------- |
      5. E类
         | 1111 | 保留为今后使用 |
         | ---- | -------------- |
   2. 网络地址转换NAT
3. 划分子网与路由聚合

   1. 划分子网
   2. 子网掩码和默认网关
   3. 无分类编址CIDR
   4. 路由聚合
4. 网络层转发分组过程

   （目的网络地址，下一跳地址）

   1. 首部提取目的IP
   2. 特定主机路由查询，命中转发否则继续执行3
   3. 最长子网掩码匹配，命中转发否则继续执行4
   4. 若存在默认路由，则转发至默认路由；否则，报告转发分组出错

   注：自始至终不会修改IP地址，而是修改MAC地址
5. 地址解析协议ARP
6. 动态主机配置协议DHCP（应用层协议）

   1. DHCP客户广播”DHCP发现“消息，寻找网络中的DHCP服务器
   2. DHCP服务器收到”DHCP发现“，广播”DHCP提供“消息
   3. DHCP客户收到”DHCP提供“消息，若接受，广播”DHCP请求“
   4. DHCP服务器广播”DHCP确认“消息，将IP地址分配给DHCP客户
7. 网际控制报文协议ICMP

   1. ICMP差错报告报文

      1. 终点不可达
      2. 源点抑制
      3. 时间超过
      4. 参数问题
      5. 改变路由
   2. 以下情况不发送差错报告报文

      1. 对ICMP差错报告报文
      2. 对第一个分片的数据报片的所有后续数据报片
      3. 对就有多播地址的数据报
      4. 特殊地址
