+++
date = '2025-09-07T23:32:48+08:00'
draft = false
title = '0907学习日志'

categories="log"

tags=["计算机组成原理","CPU","指令执行过程","CPU的数据通路","硬布线","微程序","中断和异常"]

+++

## 计算机组成原理-中央处理器

### CPU的功能和基本结构

1. CPU的功能
   1. 指令控制：取指令、分析指令和执行指令
   2. 操作控制
   3. 时间控制
   4. 数据加工
   5. 中断处理
2. CPU的基本结构
   1. 运算器
      * ALU
      * 暂存寄存器
      * 累加寄存器ACC
      * 通用寄存器GPRs
      * 程序状态字寄存器PSW
      * 移位寄存器
      * 计数器
   2. 控制器
      * PC
      * 指令寄存器IR
      * 指令译码器ID
      * 存储器地址寄存器MAR
      * 存储器数据寄存器MDR
      * 时序电路
      * 微操作信号发生器
3. CPU的寄存器
   1. 运算器的寄存器
      1. 通用寄存器组GPRs
      2. 累加从寄存器ACC
      3. 移位寄存器SR
      4. 暂存寄存器
      5. 程序状态字寄存器PSW
   2. 控制器中的寄存器
      1. 程序计数器PC
      2. 指令寄存器IR
      3. 存储器地址寄存器MAR
      4. 存储器数据寄存器MDR



### 指令执行过程

1. 指令周期

   1. 定长的机器周期

      | 取值周期 | 间址周期（取有效地址） | 执行周期（执行指令） |
      | -------- | ---------------------- | -------------------- |

   2. 不定长的机器周期

      | 取值周期 | 执行周期 |
      | -------- | -------- |

2. 指令周期的数据流

   1. 取值周期
      1. PC - MAR - 地址总线 - 存储器
      2. CU 发出读命令 - 控制总线 - 存储器
      3. 主存 - 数据总线 - MDR - IR
      4. CU 发出控制信号 - PC内容加1
   2. 间址周期
      1. Ad(IR)或MDR - MAR -  地址总线 - 存储器
      2. CU发出读命令 - 控制总线 - 存储器
      3. 主存 - 数据总线 - MDR (EA) 

   3. 执行周期

      取操作数，根据IR中的指令字的操作码通过ALU操作产生执行结果。

   4. 中断周期

      1. CU 控制将SP-1(stack pointer)，SP - MAR - 地址总线-存储器
      2. CU 发出写命令 - 控制总线 - 存储器
      3. PC - MDR - 数据总线 - 主存 （程序断电存入存储器）
      4. CU （中断服务程序的入口地址）- PC

3. 指令执行方案

   1. 单周期处理器

      所有指令相同执行时间

   2. 多周期处理器

   3. 流水线处理器



### 数据通路的功能和基本结构

1. 数据通路的功能
2. 数据通路的组成
   1. 组合逻辑元件（操作元件）
   2. 时序逻辑元件
3. 数据通路的基本结构
   1. CPU内部单总线方式
   2. CPU内部多总线方式
   3. 专用数据通路方式

### 控制器的功能和工作原理

1. 控制器的结构和功能

2. 硬布线控制器

3. 微程序控制器

   1. 微程序控制的基本概念

      1. 微命令与微操作
      2. 微指令与微周期
      3. 主存储器与控制存储器
      4. 程序与微程序

   2. 微程序控制器的组成和工作过程

      1. 微程序控制器的组成和工作过程
      2. 微程序控制器的工作过程
      3. 微程序和机器指令

   3. 微指令的编码方式

      1. 直接编码（直接控制）方式
      2. 字段直接编码方式
      3. 字段间接编码方式

   4. 微指令的地址形成方式

      1. 微指令的后继地址字段（下地址字段）
      2. 根据机器指令的操作码形成。
      3. 增量计数器法
      4. 根据各种标志决定下一条微指令分支转移的地址
      5. 友硬件直接产生微程序入口地址。

   5. 微指令的格式

      1. 水平型微指令

         | A1   | A2   | ...      | An-1 | An   | 判断测试字段 | 后继地址字段 |
         | ---- | ---- | -------- | ---- | ---- | ------------ | ------------ |
         |      |      | 操作控制 |      |      | 顺序控制     |              |

      2. 垂直型微指令

         | $\mu$OP  |    Rd    |   Rs   |
         | :------: | :------: | :----: |
         | 微操作码 | 目的地址 | 源地址 |

   6. 硬布线和微程序控制器的特点

      1. 硬布线控制器的特点
      2. 微程序控制器的特点



### 异常和中断机制

1. 异常和中断的基本概念
   1. 异常：由CPU内部产生的意外事件。a.k.a内中断 
   2. 中断：由来自CPU外部的设备向CPU发出的中断请求。a.k.a外中断。
2. 异常和中断的分类
   1. 异常的分类
      1. 故障Fault
      2. 自陷Trap
      3. 终止Abort
   2. 中断的分类
      1. 可屏蔽中断
      2. 不可屏蔽中断
3. 异常和中断响应过程
   1. 关中断
   2. 保存断点和程序状态
   3. 识别异常和中断并转到相应的处理程序
      1. 软件识别方式：CPU设置一个异常状态寄存器
      2. 硬件识别a.k.a向量中断
